<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>更新了点装备 - 千歳屋</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="/static/kusa.css">
  </head>
  <body>
    <div class="body">
      
<h1>更新了点装备</h1>
<p class="meta">TheC posted on 2011/12/09</p>
<div class="nav">
	<a href="/">首页</a> -
	<a href="/link">友情链接</a> -
	<a href="/feed">订阅</a>
</div>
<div class="post">
	<p>预感到再看DSP我就要悲剧了，于是放弃了一个晚上做些自己喜欢的事情。</p>
<p>这次给图片增加了thickbox，因为BGM用的这个所以感觉比较亲切，而且刚好WP也自带了，直接 wp_enqueue_script('thickbox'); 就可以了，轻松愉快~</p>
<p>效果是这样的</p>
<p class="image-placeholder">[原图已丢失]</p>



<p>然后给WP增加了minify和gzip，WP好像是自带gzip的只要在index.php里添加ob_start('ob_gzhandler');就可以了，相当方便</p>
<p>但是minify他真是个愁人的货啊！！</p>
<p>WP Minify，这个看起来好像是为了简化而专门为WP做的插件，老纸就是玩不转啊！！</p>
<blockquote><p>How Does it Work?</p>
<p>Upon page load, WP Minify intercepts scripts and style printing at the ‘wp_print_scripts’ and ‘wp_print_styles’ hook. WP Minify grabs these files in the proper order (minding dependencies) and passes that list to the Minify engine. The Minify engine then returns a consolidated, minified, and compressed script or style. WP Minify then references this compressed script or style in the WordPress header instead of each individual scripts/styles.</p>
</blockquote>
<p>WP Minify会查找wp_print_scripts钩子，按照里头写的文件关系压缩后输出，查了WP文档之后，貌似这样写：</p>
<pre><code>function add_scripts(){
   wp_enqueue_script('jQuery');
   wp_enqueue_script('thickbox',$deps = array('jQuery'));
}
add_action('wp_print_scripts','add_scripts');
</code></pre>
<p>因为wp_head会去调用wp_print_scripts钩子，所以会在wp_head时输出这两个js。</p>
<p>然后呢？js是输出了，说好的压缩呢？！老纸的压缩在哪里？！</p>
<p>还不如一开始就直接下个普通的minify用呀！ = =</p>
<p>说起来，因为minify直接访问时的页面太简单易懂了，一直没认真看过底下的英文说明，原来minify的真谛group以前一直忽略了...</p>
<p>于是经过重新整理，现在的首页只有1个JS请求+1个CSS请求，感觉舒服多了~XD</p>
<p>顺带，做了个新的404页面w</p>
<p>一直记不住她名字的长野原美绪~跟佑子在一起你的名字复杂到爆了，完全记不住啊！</p>
<p class="image-placeholder">[原图已丢失]</p>
</div>
<div class="comments">
	
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'blog-thec-me'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

</div>

    </div> 
    <div class="footer">
      <div class="copyright">
        <p>&copy; 千歳屋 | <a href="/feed">RSS</a></p>
      </div>
    </div>
  </body>
</html>